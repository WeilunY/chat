<div class="topbar">
  <div class="back">
    <button (click)="back()" class="btn">< Back</button> 
  </div>
  <div class="userinfo">
    <img src={{user_room.thumbnail}} alt="sunil">
    <h3>{{user_room.title}}</h3>
  </div>
</div>

<div class="mesgs" 
  *ngFor = "let message of messages">
  <div class="msg_history">

    <div *ngIf = "message.from == user_room.user_id; else incoming">
      <div [ngClass]="'outgoing_msg'">
          <div [ngClass]="'outgoing_msg_img'"> <img [src]="getThumbnail(message.from)" alt="../../assets/avatar.png"> </div>
        <div [ngClass]="'sent_msg'">
          <p>{{message.context}}</p>
          <span class="time_date"> {{message.timestamp * 1000 | date: 'yyyy-MM-dd'}}</span> </div>
      </div>
    </div>

    <ng-template #incoming>
      <div class="incoming_msg">
        <div class="incoming_msg_img"> <img [src]="getThumbnail(message.from)" alt="../../assets/avatar.png"> </div>
        <div class="received_msg">
          <div class="received_withd_msg">
            <p>{{message.context}}</p>
            <span class="time_date"> {{message.timestamp * 1000 | date: 'yyyy-MM-dd'}}</span></div>
        </div>
      </div>
    </ng-template>

  </div>
</div>

<div class="type_msg">
  <div class="input_msg_write">
    <button class="msg_add" type="button">add</button>
    <input [(ngModel)]="message" (keydown.enter)="postMessage()" type="text" class="write_msg" placeholder="Type a message" required>
    <button class="msg_send_btn" type="button" (click)="postMessage()" >Send</button>
  </div>
</div>


